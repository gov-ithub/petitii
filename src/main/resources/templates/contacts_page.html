<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head th:replace="main_head::head"></head>

<body class="nav-md">
    <div class="container body">
        <div class="main_container">
            <div class="col-md-3 left_col" th:substituteby="left::menu"></div>
            <!-- top navigation -->
            <div class="top_nav" th:substituteby="top::menu"></div>
            <!-- /top navigation -->
            <!-- page content -->
            <div class="right_col" role="main">
                <div class="">
                    <h2>Lista de contacte institutii</h2>
                    <div class="col-md-6 col-sm-6 col-xs-12">
                        <div class="buttons">
                	  		<button type="button" class="btn btn-default btn-sm"><a href="/adauga-contact"><i class="fa fa-file"></i> <span th:text="${adauga}">Contact nou</span></a></button>
                	  		<button type="button" class="btn btn-default btn-sm"><a href="/edit-contact"><i class="fa fa-edit"></i> <span th:text="${editeaza} ">Editeaza contact</span></a></button>
                	  	</div>
                    </div>
                    <div class="clearfix"></div>
                </div>
                <div class="x_content">
                    <table id="datatable-responsive" class="table table-striped table-bordered dt-responsive nowrap jambo_table bulk_action" cellspacing="0" width="100%">
                        <thead>
                            <tr>
                                <th><input type="checkbox"/></th>
                                <th>Institutie</th>
                                <th>Email</th>
                                <th>Telefon</th>
                            </tr>
                        </thead>
                        <tbody>
                            
                        </tbody>
                    </table>
                </div>
            </div>
            <!-- /page content -->
            <!-- footer content -->
            <footer>
                <div class="pull-right">
                    Gentelella - Bootstrap Admin Template by <a href="https://colorlib.com">Colorlib</a>
                </div>
                <div class="clearfix"></div>
            </footer>
            <!-- /footer content -->
        </div>
    </div>
    <div th:replace="main_head::includes"></div>

	<!-- Datatables -->
	<script th:inline="javascript" type="text/javascript">
    /*<![CDATA[*/
    function strLimit(data, limit) {
        if ((data!=null) && (data.length > limit)){
            data = data.substr(0, limit);
            data += '...';
        }
        return data;
    }

    var languageUrl = /*[[@{/vendors/datatables.net-i18n/Romanian.json}]]*/ "../static/vendors/datatables.net-i18n/Romanian.json";
    /*]]>*/
    
    var contactTable;
    $(document).ready(function () {
        	contactTable = $('#datatable-responsive').DataTable({
                processing: true,
                serverSide: true,
                sDom: 'lrtip ',
                order: [[2, 'desc']],
                ajax: {
                    url: '/rest/contacts',
                    type: 'POST',
                    data: function(d) {
                        /*[+
                         varName = [[${_csrf.parameterName}]];
                         d[varName] = [[${_csrf.token}]]; +]*/
                        /*[- */ d.csrfToken = "TOKEN"; /* -]*/
                    }
                },
                language: {
                    url: languageUrl
                },
                columns: [
                    {
                        data: null,
                        render: function (data, type, full, meta) {
                            return '<input type="checkbox"/>';
                        },
                        sortable: false
                    },
                    {
                        name: 'name',
                        data: 'name',
                        title: 'Institutie'
                    },
                    {
                        name: 'email',
                        data: 'email',
                        title: 'Email'
                    },
                    {
                        name: 'phone',
                        data: 'phone',
                        title: 'Telefon'
                    },
                ]
            });
        	selectActions(contactTable);
        });
    </script>
    <!-- /Datatables -->
    <div th:substituteby="main_head::toast"></div>
</body>

</html>